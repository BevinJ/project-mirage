<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Homepage</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/index.css') }}" />
  </head>
  <body>
    <div class="particles"></div>
    <h1 class="changing" id="random-number">Random Number:</h1>
    <!-- Button to trigger the generation of a random number -->
    <button id="generate-button" onclick="fetchRandomNumber()">Generate Random Number</button>

    <!-- Input field to change text and button color -->
    <label for="color-input">Choose a color for the buttons and the number being generated:</label>
    <input type="text" id="color-input" placeholder="Enter a color" />
    <button id="color-button" onclick="changeColor()">Apply Color</button>

    <script>
      function fetchRandomNumber() {
        fetch("{{ url_for('generate') }}")
          .then((response) => response.text())
          .then((data) => {
            const randomNumberElement = document.getElementById("random-number");
            randomNumberElement.classList.add('changing');
            randomNumberElement.innerText = `Random Number: ${data}`;
          })
          .catch((error) => console.error("Error:", error));
      }

      function changeColor() {
        const colorInput = document.getElementById('color-input').value;

        if (colorInput) {
          const randomNumberElement = document.getElementById('random-number');
          const generateButton = document.getElementById('generate-button');
          const colorButton = document.getElementById('color-button');

          randomNumberElement.style.color = colorInput;
          generateButton.style.backgroundColor = colorInput;
          colorButton.style.backgroundColor = colorInput;
        }
      }

      // Create and append particles to the document
      const particlesContainer = document.querySelector('.particles');
      for (let i = 0; i < 250; i++) {
        const particle = document.createElement('div');
        particle.classList.add('particle');
        particle.style.left = `${Math.random() * 100}vw`;
        particle.style.top = `${Math.random() * 100}vh`;
        particlesContainer.appendChild(particle);
      }

      fetchRandomNumber();
    </script>
  </body>
</html>
